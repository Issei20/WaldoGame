{"ast":null,"code":"var _jsxFileName = \"/home/atsal/Desktop/top/secure-projects/waldogamef/src/Timer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { doc, setDoc, Timestamp, updateDoc, getDocs, getDoc, collection } from \"firebase/firestore\";\nimport { db } from './firebase-config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Timer(_ref) {\n  _s();\n\n  let {\n    gameOver,\n    setGameOver\n  } = _ref;\n  const [time, setTime] = useState(0);\n  const [timerOn, setTimerOn] = useState(false);\n  const scoresAnonymousRef = doc(db, 'scores', 'anonymousUser');\n  const [startTime, setStartTime] = useState(0);\n  const [endTime, setEndTime] = useState(0);\n  const [start, setStart] = useState(false);\n\n  async function saveDataStart() {\n    await updateDoc(scoresAnonymousRef, {\n      startTime: startTime\n    });\n  }\n\n  async function saveDataEnd() {\n    await updateDoc(scoresAnonymousRef, {\n      endTime: endTime\n    });\n  }\n\n  useEffect(() => {\n    let interval = null;\n\n    if (gameOver === true) {\n      setTimerOn(false);\n      setEndTime(Date.now() / 1000);\n      saveDataEnd();\n    }\n\n    if (timerOn && gameOver === false) {\n      interval = setInterval(() => {\n        setTime(prevTime => prevTime + 10);\n      }, 10);\n    } else {\n      clearInterval(interval);\n    }\n\n    return () => clearInterval(interval);\n  }, [timerOn, gameOver]);\n  useEffect(() => {\n    if (start) {\n      saveDataStart();\n      setStart(false);\n    }\n  }, [start]);\n\n  function startGame() {\n    setStart(true);\n    setTimerOn(true);\n    setStartTime(Date.now() / 1000);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"timerContainer\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [(\"0\" + Math.floor(time / 60000 % 60)).slice(-2), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [(\"0\" + Math.floor(time / 1000 % 60)).slice(-2), \":\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: (\"0\" + time / 10 % 100).slice(-2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => startGame(),\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Timer, \"g/56ZuUF0hP7GwmJu1mksXj9MxE=\");\n\n_c = Timer;\nexport default Timer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"sources":["/home/atsal/Desktop/top/secure-projects/waldogamef/src/Timer.js"],"names":["React","useState","useEffect","doc","setDoc","Timestamp","updateDoc","getDocs","getDoc","collection","db","Timer","gameOver","setGameOver","time","setTime","timerOn","setTimerOn","scoresAnonymousRef","startTime","setStartTime","endTime","setEndTime","start","setStart","saveDataStart","saveDataEnd","interval","Date","now","setInterval","prevTime","clearInterval","startGame","Math","floor","slice"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { doc, setDoc, Timestamp, updateDoc, getDocs, getDoc, collection } from \"firebase/firestore\"; \nimport { db } from './firebase-config';\n\nfunction Timer( {gameOver, setGameOver} ) {\n    const [time, setTime] = useState(0);\n    const [timerOn, setTimerOn] = useState(false);\n    const scoresAnonymousRef = doc(db, 'scores', 'anonymousUser')\n    const [startTime, setStartTime] = useState(0);\n    const [endTime, setEndTime] = useState(0);\n    const [start, setStart] = useState(false)\n\n\n async function saveDataStart() {\n    await updateDoc(scoresAnonymousRef, {\n        startTime: startTime\n      });\n    }  \n\n\n  async function saveDataEnd() {\n    await updateDoc(scoresAnonymousRef, { endTime: endTime});\n  }\n\n\n    useEffect(() => {\n        let interval = null;\n\n        if(gameOver === true) {\n            setTimerOn(false)\n            setEndTime(Date.now()/1000)\n            saveDataEnd()\n            \n        }\n\n        if(timerOn && gameOver === false) {\n          interval = setInterval(() => {\n            setTime(prevTime => prevTime + 10)\n          },10)\n         \n\n        } else {\n            clearInterval(interval)\n        }\n\n        return () => clearInterval(interval)\n\n    }, [timerOn, gameOver])\n\n\n    useEffect(() => {\n      if(start){\n       \n      saveDataStart()\n      setStart(false) \n      }\n    }, [start])\n\n    function startGame() {\n      setStart(true)\n      setTimerOn(true)\n      setStartTime(Date.now()/1000)\n     \n    }\n    return (\n        <div className=\"timerContainer\">\n            <div>\n            <span>{(\"0\" + Math.floor((time / 60000) % 60)).slice(-2)}:</span>\n            <span>{(\"0\" + Math.floor((time / 1000) % 60)).slice(-2)}:</span>\n            <span>{(\"0\" + ((time / 10) % 100)).slice(-2)}</span>\n            <button onClick={() => startGame()}>Start</button>\n            </div>\n        </div>\n    )\n}\n\n\nexport default Timer"]},"metadata":{},"sourceType":"module"}